import{d as e,r as l,m as t,n as a,e as o,K as n,o as s,c as r,a as u,w as d,L as c,I as i,J as m,b as p}from"./vendor.59486093.js";import{r as v,a as h}from"./index.a0ab63f0.js";import"./main.fc5c0ef5.js";const g=e({setup(){const e=l(null),o=l([]),n=l(null),s=l(!1),r=l("ADD"),u=l(""),d=l(""),c=l(!1);function i(){c.value=!0,v({url:h.getAllDepartment.url,method:h.getAllDepartment.method}).then((l=>{200===l.Code?e.value=l.Data:(null!=n.value&&n.value.close(),n.value=t({message:"数据获取失败",type:"error",showClose:!0})),c.value=!1})).catch((e=>{console.log(e),c.value=!1}))}return{departmentList:e,multipleSelection:o,tipBox:n,dialogVisible:s,dialogType:r,departmentId:u,departmentName:d,loading:c,getData:i,selectedChange:function(e){o.value.length=0,e.forEach((e=>{o.value.push(e.DepartmentId)}))},handleClose:function(e){s.value=!1,u.value="",d.value="",e()},addDepartment:function(){v({url:h.createDepartment.url,method:h.createDepartment.method,data:{DepartmentId:u.value,DepartmentName:d.value}}).then((e=>{null!=n.value&&n.value.close(),200===e.Code&&!0===e.Data?n.value=t({message:"添加成功",type:"success",showClose:!0}):n.value=t({message:"添加失败",type:"error",showClose:!0}),i()})).catch((e=>{null!=n.value&&n.value.close(),n.value=t({message:"添加失败",type:"error",showClose:!0}),console.log(e)})),s.value=!1,u.value="",d.value=""},editDepartment:function(){v({url:h.updateDepartment.url.replace("{id}",u.value),method:h.updateDepartment.method,data:{DepartmentName:d.value}}).then((e=>{null!=n.value&&n.value.close(),200===e.Code?n.value=t({message:"修改成功",type:"success",showClose:!0}):n.value=t({message:"修改失败",type:"error",showClose:!0}),i()})).catch((e=>{null!=n.value&&n.value.close(),n.value=t({message:"修改失败",type:"error",showClose:!0}),console.log(e)})),s.value=!1,u.value="",d.value=""},editClick:function(e){u.value=e.DepartmentId,d.value=e.DepartmentName,r.value="EDIT",s.value=!0},removeClick:function(e){a.confirm("确定删除该部门？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{v({url:h.deleteDepartment.url.replace("{id}",e.DepartmentId),method:h.deleteDepartment.method}).then((e=>{null!=n.value&&n.value.close(),200===e.Code?n.value=t({message:"删除成功",type:"success",showClose:!0}):n.value=t({message:"删除失败",type:"error",showClose:!0}),i()})).catch((e=>{console.log(e)}))})).catch((()=>{}))},removeAll:function(){a.confirm("确定删除所选部门？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var e=[];o.value.forEach((l=>{e.push(l)})),v({url:h.deleteMultipleDepartment.url,method:h.deleteMultipleDepartment.method,data:{DepartmentId:e}}).then((e=>{null!=n.value&&n.value.close(),n.value=t({message:"成功删除"+e.Data.count+"条记录",type:"success",showClose:!0}),i()})).catch((e=>{console.log(e),null!=n.value&&n.value.close(),n.value=t({message:"删除失败",type:"error",showClose:!0})}))})).catch((()=>{}))}}},beforeMount(){this.getData()}}),b={class:"px-20 py-10"},D={class:"grid grid-cols-1 md:grid-cols-3 pb-10 mr-1 grid-rows-1 justify-items-center"},C=u("div",null,null,-1),f=u("h1",{class:"text-2xl "},"部门管理",-1),y={class:"md:space-x-8 justify-self-end"},w=u("i",{class:"el-icon-plus"},null,-1),x=p(" 添 加 "),k=u("i",{class:"el-icon-refresh-left"},null,-1),I=p(" 刷 新 "),T={class:" space-x-5"},N={class:""},A={class:"mt-5"};g.render=function(e,l,t,a,p,v){const h=o("el-dialog"),g=o("el-table-column"),V=o("el-table"),j=n("loading");return s(),r("div",b,[u("div",D,[C,f,u("div",y,[u("button",{class:"btn bg-green-400 ring-green-400",onClick:l[1]||(l[1]=l=>e.dialogVisible=!0)},[w,x]),u("button",{class:"btn bg-blue-400 ring-blue-400",onClick:l[2]||(l[2]=(...l)=>e.getData&&e.getData(...l))},[k,I])]),u(h,{"model-value":e.dialogVisible,title:"部门信息",width:"30%","before-close":e.handleClose,top:"20vh"},{footer:d((()=>[u("span",T,[u("button",{class:"btn-online hover:text-blue-400 hover:bg-blue-100 hover:border-blue-300",onClick:l[5]||(l[5]=()=>{e.dialogVisible=!1,e.departmentName="",e.departmentId=""})},"取 消"),"ADD"===e.dialogType?(s(),r("button",{key:0,class:"btn bg-blue-400 ring-blue-400",onClick:l[6]||(l[6]=(...l)=>e.addDepartment&&e.addDepartment(...l))},"确 定")):c("",!0),"EDIT"===e.dialogType?(s(),r("button",{key:1,class:"btn bg-blue-400 ring-blue-400",onClick:l[7]||(l[7]=(...l)=>e.editDepartment&&e.editDepartment(...l))},"确 定")):c("",!0)])])),default:d((()=>[u("div",null,[i(u("input",{type:"text",class:"input-box m-20 w-4/6",disabled:"EDIT"===e.dialogType,"onUpdate:modelValue":l[3]||(l[3]=l=>e.departmentId=l),placeholder:"部门编号"},null,8,["disabled"]),[[m,e.departmentId]]),i(u("input",{type:"text",class:"input-box m-20 w-4/6","onUpdate:modelValue":l[4]||(l[4]=l=>e.departmentName=l),placeholder:"部门名称"},null,512),[[m,e.departmentName]])])])),_:1},8,["model-value","before-close"])]),u("div",N,[i(u(V,{data:e.departmentList,border:"","empty-text":"暂无数据",onSelectionChange:e.selectedChange,style:{margin:"0 auto",width:"100%"}},{default:d((()=>[u(g,{type:"selection",width:"50"}),u(g,{prop:"DepartmentId",label:"部门编号",width:"200"}),u(g,{prop:"DepartmentName",label:"部门名称"}),u(g,{label:"操作",width:"200"},{default:d((l=>[u("span",{class:"text-indigo-400 link select-none",onClick:t=>e.editClick(l.row)},"编辑",8,["onClick"]),u("span",{class:"text-red-400 link select-none",onClick:t=>e.removeClick(l.row)},"删除",8,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),[[j,e.loading]]),u("div",A,[u("button",{class:"btn-online hover:bg-red-100 hover:border-red-300 hover:text-red-400",onClick:l[8]||(l[8]=(...l)=>e.removeAll&&e.removeAll(...l))}," 删除所有选择项 ")])])])};export default g;
